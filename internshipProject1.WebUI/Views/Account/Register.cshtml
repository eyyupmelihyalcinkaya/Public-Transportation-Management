@model internshipProject1.WebUI.Views.Account.RegisterModel
@{
	ViewData["Title"] = "Register";
	Layout = "_Layout";
}

<div class="register-container">
	<h2>Register</h2>
	
	<div id="error" style="color: red; margin-bottom: 10px;"></div>

	<div>
		<div>
			<label>Username:</label>
			<input type="text" id="username" required />
		</div>
		<div>
			<label>Password:</label>
			<input type="password" id="password" required />
		</div>
		<div>
			<label>Confirm Password:</label>
			<input type="password" id="rePassword" required />
		</div>
		<div>
			<button type="button" onclick="register()">Register</button>
		</div>
	</div>

	<script>
		async function register() {
			const username = document.getElementById("username").value;
			const password = document.getElementById("password").value;
			const confirmPassword = document.getElementById("rePassword").value;

			// Client-side validation
			if (password !== confirmPassword) {
				document.getElementById('error').textContent = "Passwords do not match!";
				return;
			}

			try {
				await window.apiConfig.register(username, password);
				alert("Registration successful! Please login.");
				window.location.href = "/Account/Login";
			} catch (error) {
				console.error('Registration error:', error);
				document.getElementById('error').textContent = error.message || "Registration Failed";
			}
		}
	</script>

	<link rel="stylesheet" href="~/css/register.css" />
